.reviews(ng-app="myApp")
  .row
    .col-md-7
      p.lead Customer Reviews &amp; Ratings
      a.popover_rating(href="#", data-toggle="popover", data-placement="bottom", data-title="Summary")
        span(id="allRatings") Ratings
          0
        |&nbsp;Ratings
        span.ratings
          table
            tr
              td(width="100")
                small 90 - 100
              //- td
              td(width="270")
                .progress
                  .progress-bar.progress-bar-success(id="pcnt90To100", role='progressbar', aria-valuenow='100', aria-valuemin='0', aria-valuemax='100', style='width: 100%')
                    span.sr-only 100% Complete (success)
                  //- progress-bar
                //- progress
              //- td
              td.text-center(width="50")
                small(id="count90To100") 231
            //- tr
            tr
              td
                small 80 - 89
              //- td
              td
                .progress
                  .progress-bar.progress-bar-success(id="pcnt80To89", role='progressbar', aria-valuenow='10', aria-valuemin='0', aria-valuemax='100', style='width: 10%')
                    span.sr-only 10% Complete (success)
                  //- progress-bar
                //- progress
              //- td
              td.text-center
                small(id="count80To89") 10
            //- tr
            tr
              td
                small 70 - 79
              //- td
              td
                .progress
                  .progress-bar.progress-bar-success(id="pcnt70To79", role='progressbar', aria-valuenow='1', aria-valuemin='0', aria-valuemax='100', style='width: 1%')
                    span.sr-only 1% Complete (success)
                  //- progress-bar
                //- progress
              //- td
              td.text-center
                small(id="count70To79") 1
            //- tr
            tr
              td
                small 60 - 69
              //- td
              td
                .progress
                  .progress-bar.progress-bar-success(id="pcnt60To69", role='progressbar', aria-valuenow='0', aria-valuemin='0', aria-valuemax='100', style='width: 0%')
                    span.sr-only 0% Complete (success)
                  //- progress-bar
                //- progress
              //- td
              td.text-center
                small(id="count60To69") 0
            //- tr
            tr
              td
                small 60 below
              //- td
              td
                .progress
                  .progress-bar.progress-bar-success(id="pcnt60AndBelow", role='progressbar', aria-valuenow='0', aria-valuemin='0', aria-valuemax='100', style='width: 0%')
                    span.sr-only 0% Complete (success)
                  //- progress-bar
                //- progress
              //- td
              td.text-center
                small(id="count60AndBelow") 0
            //- tr
          //- table
        //- ratings
      //- popover_rating
      br
      | 
      span(id="allReviews") 
        0
      |&nbsp;Reviews
    //- col-md-6
    .col-md-5
      .btn-review-wrap
        a.button.inline.v7(href="product-ratings.html", id='write-button') Write a review
        //a.button.inline.v7(href="product-ratings.html") Rate product
      //- btn-review-wrap
    //- col-md-6
  //- row
  .review(id="reviews")
  //- review
//- reviews

block scripts
  // External Script goes here...
  script(id='reviewList', type='text/template')
    <<{childrenHtml}>>
  //- script.
//- block scripts

block scripts
  // External Script goes here...
  script(id='review', type='text/template')
    <<#element>>
    <div class="list_groups">
        <div class="content">
            <div class="counter">
                <div class="ring">
                    <div class="count">
                        <<rating>>
                    </div>
                </div>
            </div>
            <div class="input-group">
                <span class="input-group-addon">
                    <div class="thumb">
                        <div class="img">
                            <img src="<<user.avatar>>" alt="">
                        </div>
                    </div>
                </span>
                <span class="form-control">
                  <strong>
                    <<#title>>	
                      <<title>><</title>>
                    <<^title>>
                      <<#extraProperties>>
                        Review and Rating
                      <</extraProperties>>
                      <<^extraProperties>>
                        Rating
                      <</extraProperties>>
                    <</title>>
                  </strong>
                  <br>
                  <small>by<a href="<<user.communityPage>>"><<user.firstName>> <<user.lastName>></a>| <<modifiedDateFromNow>></small>
                  <p class="comment">
                    <<description>>
                  </p>
                  <<#extraProperties>>
                    <p class="comment">
                      <strong>I would recommend this drink to a friend</strong>
                    </p>
                  <</extraProperties>>
                </span>
            </div>
        </div>
        <<#user.reviewOwner>>
            <div class="footer">
                <div class="row">
                    <div class="col-md-12">
                        <div class="right-to-center basecolor">
                            <small><span class="green"><a href="{{scopes.rateProductUrl}}">edit</a></span>&nbsp;&nbsp;&nbsp;<span class="green"><a href="#">delete</a></span></small>
                        </div>
                    </div>
                </div>
            </div>
        <</user.reviewOwner>>
    </div>
    <</element>>  
  //- script.
//- block scripts

block scripts
  // External Script goes here...
  script.
    $(document).ready(function(){

      $('.popover_rating[data-toggle="popover"]').popover({
          html: true,
          content : function() {
            console.log($(this).parent().find("span.ratings").html())
            return '<span class="ratings">' + $(this).parent().find("span.ratings").html() + '</span>';
          },
          title: function(){
            return jQuery(this).data('title') + '<span class="close">&times;</span>';
          }
        }).on('shown.bs.popover', function(e) {
          var popover = jQuery(this);
          $(this).parent().find('.popover span.close').on('click', function(e) {
            popover.popover('hide');
          });
        }).click(function(e) {
          e.preventDefault();
        });

        chratingsandreview.init();

        // URL so we can use it as productVariantId.
        var productVariantId = NaN;
        
        window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(str, key, value) {
          if (key === 'product') {
            productVariantId = parseInt(value);
          }
        });

        //$scope.productId=productVariantId;
      /************************************************************
      *
      *    Angular code.
      */
      //var app = angular.module('myApp', ['ngSanitize']);

      

      //- // Add the controller for this page
      //- app.controller('myCtrl', function($scope, crowdhoundservice) {
      //-   //crowdhoundservice.loadReview();
      //- });

      /*app.directive('reviewWidget', function(){
        return {
          restrict: 'E',
          scope: false,
          templateUrl: 'review-widget.html'
        }
      });*/
    });

  //- script.
//- block scripts
